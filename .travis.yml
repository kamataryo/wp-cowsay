sudo: false

language:
  - php

php:
- 7.2
- 5.6


env:
  global:
  - WP_VERSION: latest
  - WP_VERSION_TO_DEPLOY: latest
  - PHP_VERSION_TO_DEPLOY: 5.6
  - SVN_REF: https://plugins.svn.wordpress.org/wp-cowsay/
  - BRANCH_TO_RELEASE: release
  - RELEASE_DIR: .

notifications:
  email:
    on_success: never
    on_failure: change

before_script:
  - bash ./.bin/install-wp-tests.sh wordpress_test root '' localhost $WP_VERSION
  - composer install
  - npm install

script:
- phpunit
- npm run generateMo

after_success:
  - ./.bin/release.sh
